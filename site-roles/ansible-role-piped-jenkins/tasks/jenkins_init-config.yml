---

# we are going to re-configure jenkins on every initialization !
# See: https://wiki.jenkins-ci.org/display/JENKINS/Post-initialization+script

- name: "Create Jenkins init script dir"
  file:
    path: "{{ jenkins_home }}/init.groovy.d"
    state: directory
    owner:  "{{ jenkins_runas_user }}"
    group:  "{{ jenkins_runas_group }}"
    mode: 0755
  become: true

- copy:
    src: "{{ item }}"
    dest: "{{ jenkins_init_dir }}/{{ item }}"
  with_items:
    - init.groovy
    - get_creds.groovy
    - set_git_global_config.groovy
    - sonar-artifactory-settings.groovy
